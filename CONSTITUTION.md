# 事業継続力強化計画策定支援システム 開発憲法

**制定日**: 2026年1月13日  
**制定者**: 和歌山県商工会連合会 経営指導員  
**バージョン**: 1.0

---

## 前文

本システムは、中小企業の事業継続力強化を支援するために開発された。単なる電子申請ツールではなく、**経営指導員と事業者の協働による持続可能な経営支援の実現**と、**認定品質を保証するアーキテクチャの構築**という二つの理想を追求する。

この憲法は、開発の指針として常にコードベースを検分し、絶えず改良活動を実行するための規範である。

---

## 第一章: 二大理念

### 第1条: 経営支援の理念（Business Support Ideals）

> **「寄り添い・引き出し・導く」支援の実現**

1. **寄り添い（Empathy）**
   - 経営者・従業員・商工会職員の三者それぞれの視点を尊重する
   - ITリテラシーの高低に関わらず、全てのユーザーが迷わず使える

2. **引き出し（Extraction）**
   - 対話を通じて事業者の暗黙知を形式知に変換する
   - AIコンシェルジュが「何を聞けばよいかわからない」を解消する

3. **導く（Guidance）**
   - 認定取得という目標に向けて、具体的な改善提案を提示する
   - 政府マニュアルの知識を動的に活用し、最適な記載例を提供する

### 第2条: アーキテクチャの理念（Architecture Ideals）

> **「認定駆動・透明性・持続性」の追求**

1. **認定駆動（Certification-Driven）**
   - 認定要件をスキーマとして明文化し、コードと1:1対応させる
   - 審査官視点の監査エージェントにより、事前に品質を担保する

2. **透明性（Transparency）**
   - 認定可能性スコアの根拠を明示する
   - 改善提案には必ず「なぜ」を添える

3. **持続性（Sustainability）**
   - 政府仕様変更（例：12/17改修）に迅速に対応できる構造
   - マニュアルRAGにより、知識更新がコード変更なしに可能

---

## 第二章: 開発哲学の推移（全185コミット分析）

### 開発フェーズ詳細年表

| Phase | 名称 | 代表コミット | 主要な進化 |
|:---:|:---|:---|:---|
| **0** | **Initial Setup** | `690879d` Initial commit | リポジトリ作成、.gitignore、requirements.txt |
| **1** | **Core Architecture** | `4bdc046` Create app_hybrid.py | Streamlit基盤、schemas.py、chat_manager確立 |
| **2** | **Dashboard Foundation** | `5bf3df3` Improve Dashboard UI/UX | ダッシュボードUI、スコアリングロジック |
| **3** | **Severity System** | `ab50edc` Add severity classification | Critical/Warning分類、下書きExport |
| **4** | **Mobile & Persistence** | `8fa9a6e` Implement mobile persistence | モバイル対応、agentic data extraction |
| **5** | **User Manuals** | `3b15d9e` docs: add user manuals | 3ロール別マニュアル（経営者/従業員/職員） |
| **6** | **Certification-Driven** | `b07926a` 認定駆動型アーキテクチャ実装 | certification_requirements, audit_agent, RAG |
| **7** | **Quality Assurance** | `52141b8` Add J-SHIS integration | J-SHIS統合、PDCA必須化、12/17改修対応 |
| **8** | **UX Polish** | `b8bfbb9` UX improvement Plan A | クイック返信、サイドバー進捗、スコア表示改善 |
| **9** | **Export Enhancement** | `f3b0184` Electronic application Excel | 電子申請直接入力Excel、チェックリストUI |
| **10** | **Stabilization** | `6dfdc5c` GEMINI_API_KEY統一 | APIキー統一、LocalStorage自動保存 |

---

### 理念の発展過程（推移分析）

#### Phase 0-1: 基盤構築期（Initial → Core）

```
目的: 最小限のプロトタイプ構築
理念: まだ明文化されていない

主要ファイル:
├── app_hybrid.py (Streamlit UI)
├── schemas.py (Pydanticモデル)
└── chat_manager.py (対話管理)

この時点の暗黙の理念:
「AIチャットで申請書を作れるようにしたい」
```

#### Phase 2-3: 可視化の確立（Dashboard → Severity）

```
目的: 進捗の見える化と品質基準の導入
理念の萌芽: 「何が足りないか」を明確に伝える

主要追加:
├── Dashboard UI/UX改善
├── スコアリングロジック
├── Critical/Warning分類
└── 下書きシート出力（Excel）

この時点で芽生えた理念:
「透明性」- ユーザーに常に現状を示す
「導く」  - 不足項目を明示し改善を促す
```

#### Phase 4-5: ユーザー多様化（Mobile → Manuals）

```
目的: 異なる立場のユーザーへの対応
理念の確立: 「寄り添い」の具体化

主要追加:
├── モバイル対応（メニュー可視化、永続化）
├── Agenticデータ抽出（PDF自動読み取り）
├── USER_MANUAL_MANAGER.md (経営者向け)
├── USER_MANUAL_EMPLOYEE.md (従業員向け)
└── USER_MANUAL_OFFICIAL.md (商工会職員向け)

確立された理念:
「寄り添い」- 三者三様の視点を尊重
「引き出し」- 対話で暗黙知を形式知に
```

#### Phase 6: アーキテクチャ革新（Certification-Driven）

```
目的: 認定品質の構造的保証
理念の体系化: 認定駆動型アーキテクチャ

主要追加:
├── certification_requirements.py (認定要件スキーマ)
├── certification_requirements.json (7セクション定義)
├── audit_agent.py (審査官視点の監査)
├── manual_rag.py (マニュアルベクトル検索)
└── vector_store.db (知識ベース)

確立された理念:
「認定駆動」- 要件をコードと1:1対応
「持続性」  - 知識をRAGで動的更新可能に
```

#### Phase 7: 政府準拠（Quality Assurance）

```
目的: 実際の差し戻し事例への対応
理念の深化: 現場フィードバックの反映

主要追加:
├── jshis_helper.py (J-SHIS統合)
├── PDCA必須化 (training_month, review_month)
├── 12/17改修対応 (internal_publicity)
├── 200文字必須チェック (事業概要)
└── Case 2検証データ (差し戻し→認定事例)

深化された理念:
「認定駆動」の実践 - 差し戻し理由からの学習
政府仕様変更への迅速対応
```

#### Phase 8-10: 完成度向上（UX → Stabilization）

```
目的: 実用レベルへの到達
理念の完成: 二大理念の統合運用

主要追加:
├── クイック返信ボタン（案A実装）
├── サイドバー進捗常時表示
├── X/Y形式スコア表示
├── 電子申請直接入力Excel
├── 添付書類チェックリストUI
├── 災害-対策整合性チェック
├── LocalStorage自動保存
└── GEMINI_API_KEY統一

完成された理念:
経営支援: 寄り添い → 引き出し → 導く
アーキテクチャ: 認定駆動 → 透明性 → 持続性
```

---

### 理念発展のマイルストーン

| 日付推定 | コミット | 理念の転換点 |
|:---|:---|:---|
| 初期 | `690879d` | 「とりあえず動くもの」から開始 |
| 中期 | `ab50edc` | 「品質の見える化」へ転換 |
| 中期 | `3b15d9e` | 「三者協働モデル」の確立 |
| 後期 | `b07926a` | 「認定駆動型」革命 |
| 後期 | `52141b8` | 「政府準拠」の徹底 |
| 現在 | `6dfdc5c` | 「二大理念の統合運用」完成 |

---

## 第三章: 現行アーキテクチャとの照合

### 照合度スコア: **70 / 100点**（2026/01/13 専門家監査による再評価）

| 理念項目 | 現状スコア | 根拠 |
|:---|:---:|:---|
| **経営支援の理念** | | |
| 寄り添い（3ロール対応） | 80% | USER_MANUAL 3種、ロール別UI完備。だがオンボーディング不在 |
| 引き出し（AI対話） | 75% | クイック返信、スマート抽出実装。対話シナリオが線形的 |
| 導く（改善提案） | 65% | 監査エージェント稼働だが提案の具体性不足 |
| **アーキテクチャ理念** | | |
| 認定駆動 | 85% | certification_requirements.json実装 |
| 透明性 | 75% | スコア内訳表示あるが改善根拠の説明不足 |
| 持続性 | 65% | spec_monitor作成だが自動検知が手動依存 |

### 未達項目（2026/01/13更新）

| 優先度 | 項目 | 状態 |
|:---:|:---|:---|
| 🔴 | オンボーディングウィザード | 未実装 |
| 🔴 | エラーメッセージ日本語化 | 未実装 |
| 🔴 | 保存確認ダイアログ | 未実装 |
| 🟡 | 改善提案の具体化（例文付き） | 未実装 |
| 🟡 | セッション共有機能 | 未実装 |
| 🟢 | ステップウィザードUI | 検討中 |

---

## 第四章: 未来ロードマップ

### Phase 7 (2026 Q1): 完全認定対応
- 電子申請直接入力Excel完成
- 添付書類自動生成
- 申請前最終チェックリスト

### Phase 8 (2026 Q2): 自律進化
- 政府仕様変更の自動検知
- マニュアル更新時の自動再ベクトル化
- ユーザーフィードバックの自動収集

### Phase 9 (2026 Q3): 地域展開
- 他県商工会への横展開
- 業種別テンプレート
- 複数企業一括処理

### 二大理念の相互補完

```
             経営支援の理念
          ┌─────────────────┐
          │  寄り添い       │
          │    ↓            │
          │  引き出し       │
          │    ↓            │
          │  導く           │
          └────────┬────────┘
                   │
        品質保証 ←─┼─→ 使いやすさ
                   │
          ┌────────┴────────┐
          │ アーキテクチャ理念│
          │  認定駆動        │
          │    ↓            │
          │  透明性         │
          │    ↓            │
          │  持続性         │
          └─────────────────┘
```

---

## 第五章: 運用規定

### 継続的検分

1. **コードレビュー時の確認**
   - この変更は「寄り添い・引き出し・導く」のいずれに貢献するか？
   - この変更は「認定駆動・透明性・持続性」を損なわないか？

2. **リリース前チェック**
   - 照合度スコアが前回を下回らないこと

### 改良活動

1. **定期レビュー**: 月次で照合度を再計算
2. **フィードバック反映**: ユーザー要望を本憲法と照合し優先度決定
3. **仕様変更対応**: 政府仕様変更を48時間以内にスキーマ更新

---

## 附則

### 参照ドキュメント

- README.md（プロジェクト概要）
- USER_MANUAL_*.md（3種のユーザーマニュアル）
- certification_requirements.json（認定要件定義）
- implementation_plan_certification_architecture.md（設計書）

---

**制定完了**

*本憲法は、jigyokei-appの持続的な発展と、中小企業の事業継続力強化に資することを目的とする。*
